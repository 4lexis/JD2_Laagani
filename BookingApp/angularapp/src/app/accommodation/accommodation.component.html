<!-- ADMIN PAGE -->
<div *ngIf="currentRole == 'Admin'">
    <h3>Accommodations </h3>
    <table class="table table-striped table-hover ">
        <thead>
            <tr>
                <th>Name</th>
                <th>Address</th>
                <th>AvgGrade</th>
                <th>ImageURL</th>
                <th>Description</th>
                <th>Latitude</th>
                <th>Longitude</th>
                <th>Place</th>
                <th>Acc Type</th>
                <th>Owner</th>
                <th>Approved</th>
                <th colspan="2">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let acc of accommodations">

                <td>
                    <inline-editor type="text" [(ngModel)]="acc.Name" (onSave)="onEdit(acc)" name="Name"></inline-editor>
                </td>
                <td>
                    <inline-editor type="text" [(ngModel)]="acc.Address" (onSave)="onEdit(acc)" name="Address"></inline-editor>
                </td>
                <td>
                    <inline-editor type="number" [(ngModel)]="acc.AverageGrade" (onSave)="onEdit(acc)" name="AverageGrade"></inline-editor>
                </td>
                <td>
                    <inline-editor type="text" [(ngModel)]="acc.ImageURL" (onSave)="onEdit(acc)" name="ImageURL"></inline-editor>
                </td>
                <td>
                    <inline-editor type="textarea" [(ngModel)]="acc.Description" (onSave)="onEdit(acc)" name="Description"></inline-editor>
                </td>
                <td>
                    <inline-editor type="number" [(ngModel)]="acc.Latitude" (onSave)="onEdit(acc)" name="Latitude"></inline-editor>
                </td>
                <td>
                    <inline-editor type="number" [(ngModel)]="acc.Longitude" (onSave)="onEdit(acc)" name="Longitude"></inline-editor>
                </td>
                <td>
                    <inline-editor type="select" [options]=outPlaces [(ngModel)]="acc.Place_Id" value="acc.Place_Id" (onSave)="onEdit(acc)" name="PlaceName"></inline-editor>
                </td>
                <td>
                    <inline-editor type="select" [options]=outAccTypes [(ngModel)]="acc.AccommodationType_Id" value="acc.AccommodationType_Id" (onSave)="onEdit(acc)" name="AccommodationTypeName">
                    </inline-editor>
                </td>

                <td>
                    {{acc.AppUser_Id}}
                </td>
                <td>
                    {{acc.Approved}}
                </td>
                <td>
                    <button type="button" class="btn btn-danger" (click)="delte(acc)">Remove</button>
                </td>

                <td>
                    <button *ngIf="acc.Approved == false" type="button" class="btn btn-success" (click)="approve(acc)">Approve</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="manager-buttons" *ngIf="currentRole == 'Manager'">
    <button type="button" class="btn btn-success" (click)="createAccModal.open()">Create new accommodation</button>
    <button type="button" class="btn btn-success" (click)="createTypeModal.open()">Create new accommodation type</button>
</div>
<!-- MANAGER & USER PAGE -->
<div *ngIf="currentRole == 'Manager' || currentRole=='AppUser'">
    <ul class="columns">
        <li *ngFor="let acc of accommodations">
            <a href="/accommodation-details/{{acc.Id}}">
                <figure><img [src]="acc.ImageURL" />
                    <figcaption>{{ acc.Name }}</figcaption>
                </figure>
            </a>
            <span>{{ acc.AverageGrade }}</span>
        </li>
    </ul>

    <!-- modal (table) for create new accommodation -->
    <modal #createAccModal>
        <modal-header>
            <h4 class="modal-title">Enter Accommodation data:</h4>
        </modal-header>
        <modal-content>
            <form #f="ngForm" (ngSubmit)="onSubmit(f.value, f)">
                <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !Name.valid }">
                    <input type="text" class="form-control" placeholder="Name" name="Name" ngModel required />
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !Description.valid }">
                    <input type="textarea" class="form-control" placeholder="Description" name="Description" ngModel required />
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !Address.valid }">
                    <input type="text" class="form-control" placeholder="Address" name="Address" ngModel required />
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !Latitude.valid }">
                    <input type="number" disabled class="form-control" placeholder="Latitude" name="Latitude" [ngModel]="map.clickedLat" required />
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !Longitude.valid }">
                    <input type="number" disabled class="form-control" placeholder="Longitude" name="Longitude" [ngModel]="map.clickedLong" required />
                </div>
                <div class="form-group">
                    <label> Select Place </label>
                    <select #p (change)="dropDownPlace(p.value)" class="form-control">            
                        <option *ngFor="let place of places" [value]="place.Id" >{{place.Name}} </option>            
                    </select>
                </div>
                <div class="form-group">
                    <label> Select Type </label>
                    <select #at (change)="dropDownAccType(at.value)" class="form-control">            
                        <option *ngFor="let accType of accTypes" [value]="accType.Id" >{{accType.Name}} </option>            
                    </select>
                </div>
                <div class="form-group buttons">
                    <button type="button" class="btn btn-default" (click)="createAccModal.close()">Odustani</button>
                    <button type="submit" class="btn btn-primary">Potvrdi</button>
                    <button type="button" class="btn btn-success" (click)="selectLocation.open()">Izaberi lokaciju</button>
                </div>
            </form>
        </modal-content>
    </modal>
    <!-- end modal (table) for user reservation -->

    <!-- modal (table) for create new accommodation type -->
    <modal #createTypeModal>
        <modal-header>
            <h4 class="modal-title">Enter Accommodation type data:</h4>
        </modal-header>
        <modal-content>
            <app-accommodation-type #accType></app-accommodation-type>
        </modal-content>
    </modal>
    <!-- end modal (table) for user reservation type -->

    <!-- modal (table) for location -->
    <modal #selectLocation>
        <modal-header>
            <h4 class="modal-title">Select location on map:</h4>
        </modal-header>
        <modal-content>
            <app-map #map></app-map>
        </modal-content>
        <modal-footer>
            <button type="button" class="btn btn-default" (click)="selectLocation.close()">U redu</button>
        </modal-footer>
    </modal>
    <!-- end modal (table) for location -->

</div>