<div class="col-md-6 col-md-offset-3">
    <h2>Users</h2>
    <table class="table table-striped table-hover ">
        <thead>
            <tr>
                <th>Id</th>
                <th>Username</th>
                <th>Email</th>
                <th>Role</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let user of users">
                <td>{{ user.Id }}</td>
                <td> {{ user.Username }} </td>
                <td>
                    <inline-editor type="text" [(ngModel)]="user.Email" (onSave)="onSave(user)" name="Email"></inline-editor>
                </td>
                <td>
                    <inline-editor type="select" [(ngModel)]="user.Role" [options]="outRoles" value="user.Role" (onSave)="onSave(user)" name="Role"></inline-editor>
                </td>
                <td>
                    <button type="button" class="btn btn-danger" (click)="removeUser(user)">Remove</button>
                </td>
            </tr>
        </tbody>
    </table>
    <br/>
    <button type="button" *ngIf="!isVisible" class="btn btn-success" (click)="toggle()">Create new user</button>
    <div *ngIf="isVisible" class="form-group">
        <h2>Enter new user data</h2>
        <form name="form" (ngSubmit)="f.form.valid && onSubmit(f.value, f)" #f="ngForm" novalidate>
            <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !Username.valid }">
                <label for="Username">Username</label>
                <input type="text" class="form-control" name="Username" [(ngModel)]="model.Username" #Username="ngModel" required />
                <div *ngIf="f.submitted && !Username.valid" class="help-block">Username is required</div>
            </div>
            <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !Password.valid }">
                <label for="Password">Password</label>
                <input type="Password" class="form-control" name="Password" [(ngModel)]="model.Password" #Password="ngModel" required />
                <div *ngIf="f.submitted && !Password.valid" class="help-block">Password is required</div>
            </div>
            <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !Email.valid }">
                <label for="Email">Email</label>
                <input type="text" class="form-control" name="Email" [(ngModel)]="model.Email" #Email="ngModel" required />
                <div *ngIf="f.submitted && !Email.valid" class="help-block">Email is required</div>
            </div>
            <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !Role.valid }">
                <label for="Role">Role</label>
                <select #select class="form-control" name="Role" [(ngModel)]="model.Role" #Role="ngModel" required>            
                    <option *ngFor="let r of outRoles" [value]="r.value" >{{r.text}} </option>            
                </select>
                <div *ngIf="f.submitted && !Role.valid" class="help-block">Role is required</div>
            </div>
            <div class="buttons">
                <button type="button" class="btn btn-default" (click)="toggle()">Cancel</button>
                <button type="submit" class="btn btn-primary">Create</button>
            </div>
        </form>
    </div>

</div>